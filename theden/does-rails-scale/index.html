

  


<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Does Rails Scale? - by Jarkko of Bear Metal</title>
  <meta name="author" content="Bear Metal OÜ">

  
  <meta name="description" content="Does Rails Scale? Jarkko wrote this on Dec 19th, 2014 Photo by Soctech Back when Rails was still not mainstream, a common dismissal by developers &hellip;">
  <meta name="keywords" content="ruby, rails, scaling, performance, rails performance">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://bearmetal.eu/theden/does-rails-scale">
  <link href="/images/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/theden/atom.xml" rel="alternate" title="Bear Metal" type="application/atom+xml">

  
    
  


<link rel="author" href="https://plus.google.com/117033765270760829494/">
  

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script type="text/javascript" src="//use.typekit.net/mba8ekq.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<script type="text/javascript">
  $(document).ready(function($) {
    $('a.expand').click(function(event) {
      $(this).parents('.testimonial').find('.the-rest').addClass('visible').slideDown('500');
      $(this).parents('.read-more').hide();
      return false;
    });
  });
</script>
  <script type="text/javascript">

  var _gaq = _gaq || [];
  var pluginUrl =
   '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-40333336-1'], ['_setDomainName', 'bearmetal.eu']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body   >
  <header role="banner" class="post row">
  <div class="small-12 large-8 columns small-centered">
    This is <a href="/theden">The Den</a>, a publication crafted by the friendly cubs at <a href="/">Bear <i><img src="/images/bear.png"></i> Metal</a>.
  </div>
</header>

  <div id="main">
    <div id="content">
      <div class="row">
<article class="hentry large-8 small-12 small-centered columns" role="article">
  
  <header>
    
      <h1 class="entry-title">Does Rails Scale?</h1>
    
    
      <p class="meta">
        
  

<span class="byline author vcard"><span class="fn"><a href="/team/jarkko/" rel="author">Jarkko</a></span> wrote this on </span>

        








  


<time datetime="2014-12-19T15:22:00+02:00" pubdate data-updated="true">Dec 19<span>th</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><div class="bogus-wrapper"><notextile><figure>
      <p><a href="https://www.flickr.com/photos/soctech/43279549/"><img src="https://farm1.staticflickr.com/24/43279549_465d50976e_b_d.jpg" alt="" /></a></p>

      <figcaption>
        <p>Photo by <a href="https://www.flickr.com/photos/soctech/43279549/">Soctech</a></p>
      </figcaption>
    </figure></notextile></div>

<p>Back when Rails was still not mainstream, a common dismissal by developers using other – more established – technologies was that Rails is cool and stuff, but it will never scale<sup id="fnref:marketing"><a href="#fn:marketing" rel="footnote">1</a></sup>. While the question isn’t (compared to Rails’ success) as common these days, it still appears in one form or another every once in a while.</p>

<p>Last week on the Ruby on Rails Facebook group, someone asked <a href="https://www.facebook.com/groups/rubyandrails/permalink/10153620823655752/">this question</a>:</p>

<blockquote>
  <p>Can Rails stand up to making a social platform like FB with millions of users using it at the same time? </p>

  <p>If so what are the pro’s and the cons?</p>
</blockquote>

<p>So in other words, can Rails scale <em>a lot</em>?</p>

<p>Just as is customary for a Facebook group, the question got a lot of clueless answers. There were a couple of gems like this:</p>

<blockquote>
  <p>Tony if you want to build some thing like FB, you need to learn deeper mountable engine and SOLID anti pattern.</p>
</blockquote>

<p>The worst however are answers from people who <em>don’t know</em> they don’t know shit but insist on giving advice that is only bound to either confuse the original poster or lead them astray – and probably both:</p>

<blockquote>
  <p>Twitter is not a good example. They stopped using Rails because it couldn’t handle millions of request per second. They began using Scala.</p>
</blockquote>

<p>This is of course mostly BS with a hint of truth in it, but we’ll get back to that in a bit.</p>

<p>The issue with the question itself, is that <em>it’s the wrong question to ask</em>, and this has nothing to do with Ruby or Rails per se.</p>

<p>Why is it the wrong question? Let’s have a look.</p>

<p>Sure, Ruby is slow in raw performance. It has gotten a lot faster during the past decade, but it is still a highly dynamic interpreted scripting language. Its main shtick has always been programmer happiness, and its primary way to attain that goal has definitely not been to return from that test run as fast as possible. The same goes for Rails.</p>

<p>That said, there are two reasons bare Ruby performance doesn’t matter <em>that</em> much. First, it’s only a tiny part of the <strong>perceived app performance</strong> for the user. Rails has gone out of its way to automatically make the frontend of your web app performant. This includes frontend caching, asset pipeline, and more opinionated things like Turbolinks. You can of course screw all that up, but you would be amazed how much actual end-user performance you’d miss if you’d write the same app from scratch – not to mention the time you’d waste building it.</p>

<p>Second, and most important for this discussion: <strong>scaling is not the same thing as performance</strong>. Rails has always been built on the <a href="http://en.wikipedia.org/wiki/Shared_nothing_architecture">shared nothing architecture</a>, where in theory the only thing you need to do to scale out your app is to throw more hardware at it – the app should scale linearly. Of course there are limits to this, but they are by no means specific to Rails or Ruby.</p>

<p>Scaling and performance are two separate things. They are related as terms, but not strictly connected. Your app can be very fast for a couple users but awful for a thousand (didn’t scale). Or it can scale at O(1) to a million users but loading a page for even a single concurrent user can take 10 seconds (scales but doesn’t perform).</p>

<p>Like stated above, a traditional crud-style app on Rails can be made to scale very well by just adding app server instances, cores, and finally physical app servers serving the app. This is what is meant by scaling out<sup id="fnref:vs-up"><a href="#fn:vs-up" rel="footnote">2</a></sup>. Most often the limiting factor here is not Rails but the datastore, which is still often the one shared component in the equation. Scaling the database out is still harder than the appservers, but nevertheless possible. That is way outside the scope of this article, however.</p>

<h2 id="is-this-the-right-tool-for-the-job">Is this the right tool for the job?</h2>

<p>It’s clear in hindsight that a Rails app wasn’t the right tool for what Twitter became – a juggernaut where millions of people were basically realtime chatting with the whole world.</p>

<p>That doesn’t mean that Rails wasn’t a valid choice for the original app. Maybe it wasn’t the best option even then from the technical perspective, but it for sure made developing Twitter a whole lot faster in its initial stages. You know, twitter wasn’t the only contender in the microblogging stage in the late naughties. We finns fondly remember Jaiku. Then there was that other San Fransisco startup using Django that I can’t even name anymore.</p>

<p>Anyway, the point is that <em>reaching a scale where you have to think harder about scalability is a very, very nice problem to have</em>. Either you built a real business and are making money hand over fist, or you are playing – and winning – the eyeball lotto and have VCs knocking on your door (or, more realistically, have taken on several millions already). The vast majority of businesses <em>never</em> reach this stage.</p>

<p>More likely you just fail in the hockeystick game (the VC option), or perhaps build a sustainable business (the old-fashioned <em>people pay me for helping them kick ass</em> kind). In any case, you won’t have to worry about scaling to millions of concurrent users.</p>

<p>Even at the very profitable, high scale SaaS market there are hoards of examples of apps running on Rails. Kissmetrics runs its frontend on Rails, as does GitHub, not to mention Groupon, Livingsocial<sup id="fnref:ok-profitable"><a href="#fn:ok-profitable" rel="footnote">3</a></sup>, and many others.</p>

<p>However, at certain scale you have to go for a more modular architecture, SOA if I may. You can use a message queue for message passing, a noSQL db for non-relational and ephemeral data, node.js for realtime apps, and so on. <em>A good tool for every particular sub-task of your app</em>.</p>

<p>That said, you need to keep in mind what I said above. It is pretty unlikely you will ever reach a state where you really need to scale. Thus, thinking about the architecture at the initial stage too much is a form of premature optimization. As long as you don’t do anything extra stupid, you can probably get away with a simple Rails app. Because splitting up your app to lots of components early on makes several things harder and more expensive:</p>

<ul>
  <li>Complexity of development.</li>
  <li>Operating and deploying a bunch of different apps.</li>
  <li>Keeping track that all apps are up and running.</li>
  <li>Hunting bugs.</li>
  <li>Making changes in a lean development environment where things change rapidly</li>
  <li>Cognitive cost of understanding and learning how the app works. This is especially true when you’re expanding your team.</li>
</ul>

<p>This doesn’t mean that at some point you shouldn’t do the split. There might be a time where the scale for the points above tips, and a monorail app becomes a burden. But then again, <em>there might not</em>. So do what makes sense now, not what makes sense in your imaginary future.</p>

<p>Of <em>course</em> Rails alone won’t scale to a gazillion users for an app it wasn’t really meant for to begin with. Neither is it supposed to. However, it is amazing how far you can get with it, just the same way that the old boring PostgreSQL still beats the shit out of its more “modern” competitors in most common usecases<sup id="fnref:special-cases"><a href="#fn:special-cases" rel="footnote">4</a></sup>.</p>

<h2 id="questions-you-should-be-asking">Questions you should be asking</h2>

<p>When making a technology decision, instead of “Does is scale?”, here’s what you should be asking instead:</p>

<ul>
  <li>What is the right tool for the jobs of my app?</li>
  <li>How far can I likely get away with a single Rails app?</li>
  <li>Will we ever really reach the scale we claim in our investor prospectus? No need to lie to yourself here.</li>
  <li>What is more important: getting the app up and running and in front of real users fast, or making it scalable in an imaginary future that may never come?</li>
</ul>

<p>Only after answering those are you equipped to make a decision.</p>

<p>P.S. Reached the point where optimizing Rails and Ruby performance <em>does</em> make a difference? We’re writing <a href="https://bearmetal.eu/theden/categories/rails-performance/">a series of articles</a> about just that. Pop your details in the <a href="#mc_embed_signup">form ☟ down there</a> and we’ll keep you posted.</p>

<div class="footnotes">
  <ol>
    <li id="fn:marketing">
      <p>Another good one I heard in EuroOSCON 2005 was that the only thing good about Rails is its marketing.<a href="#fnref:marketing" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:vs-up">
      <p>Versus scaling up, which means making the single core or thread faster.<a href="#fnref:vs-up" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:ok-profitable">
      <p>OK, the last two might not pass the profitable bit.<a href="#fnref:ok-profitable" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:special-cases">
      <p>There are obviously special cases where a single Rails app doesn’t cut it even from the beginning. E.g. computationally intensive apps such as Kissmetrics or Skylight.io obviously won’t run their stats aggregation processes on Rails.<a href="#fnref:special-cases" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div>
</div>



  
    
      <div id="mc_embed_signup" class="row">

  <div class="small-12 large-12 columns">
    <p>
    Still use RSS? Go <a href="/theden/atom.xml">grab it</a>. Not? We neither. Pop your email address in the form below and we'll post new posts in the series of Ruby articles straight to your mailbox.
  </p>
    <form action="//odesign.us6.list-manage.com/subscribe/post?u=a690c5659c8402fec4cd18592&amp;id=66586d7b9e" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
        <div id="mc_embed_signup_scroll">

    <div class="row">
      <div class="large-12 columns">
        <label for="mce-EMAIL">Your Email Address
          <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
        </label>
      </div>
    </div>

    <div class="row">
      <div class="large-12 columns">
        <label for="mce-FNAME">Your First Name (optional)
          <input type="text" value="" name="FNAME" class="" id="mce-FNAME">
        </label>
      </div>
    </div>

      <div id="mce-responses" class="clear">
        <div class="response" id="mce-error-response" style="display:none"></div>
        <div class="response" id="mce-success-response" style="display:none"></div>
      </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
        <div style="position: absolute; left: -5000px;"><input type="text" name="b_a690c5659c8402fec4cd18592_66586d7b9e" tabindex="-1" value=""></div>
        <div class="clear"><input type="submit" value="Send me those awesome tips" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
        </div>
    </form>
  </div>
</div>

<!--End mc_embed_signup-->
    

    
  
    

    
  
    

    
  
    

    
  
    

    
  

  <footer>
    <p class="meta">
      
  

<span class="byline author vcard"><span class="fn"><a href="/team/jarkko/" rel="author">Jarkko</a></span> wrote this on </span>

      








  


<time datetime="2014-12-19T15:22:00+02:00" pubdate data-updated="true">Dec 19<span>th</span>, 2014</time>
      in
      

<span class="categories">
  
    <a class='category' href='/theden/categories/performance/'>performance</a>, <a class='category' href='/theden/categories/rails/'>rails</a>, <a class='category' href='/theden/categories/rails-performance/'>rails performance</a>, <a class='category' href='/theden/categories/ruby/'>ruby</a>, <a class='category' href='/theden/categories/scaling/'>scaling</a>
  
</span>


    </p>
    <p class="meta">
      
        <a class="basic-alignment left" href="/theden/rails-garbage-collection-naive-defaults/" title="Previous Post: Rails Garbage Collection: naive defaults">&laquo; Rails Garbage Collection: naive defaults</a>
      
      
        <a class="basic-alignment right" href="/theden/rails-garbage-collection-age-matters/" title="Next Post: Rails Garbage Collection: age matters">Rails Garbage Collection: age matters &raquo;</a>
      
    </p>
  </footer>
</article>

</div>


    </div>
  </div>
  <script type="text/javascript">
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '51767878108d7b455f000154');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>
</body>
</html>
